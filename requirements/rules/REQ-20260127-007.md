# REQ-20260127-007: Background Color Update + React-based Theme Shell

## Requirement Summary

**Objective:** Update background colors across all calculator pages and implement a React-based theme shell for enhanced user experience and maintainability.

**Scope:** All calculator pages across Math, Loans, and Time & Date categories

**Priority:** HIGH

**Change Type:** Layout/CSS + New Framework + Refactor

## Architecture Conflict Notice

⚠️ **CRITICAL ARCHITECTURAL CONCERN:** This requirement requests a "React-based Theme Shell" which appears to conflict with established MPA (Multi-Page Application) architecture requirements:

- Universal Requirements ARCH-1: Calculator pages MUST be implemented as MPA
- ARCH-2: Calculator navigation MUST use standard `<a href>` links with full page reloads  
- ARCH-3: SPA-style routing is NOT permitted for calculators
- ARCH-4: Each calculator MUST be a standalone HTML document

**Resolution Required:** The requirement must clarify whether:
1. React is used for static generation only (build-time React → static HTML output)
2. React components for reusable UI elements that compile to vanilla JS
3. A hybrid approach maintaining MPA navigation while using React for themes
4. An architecture change approval to allow SPA behavior

## Background Color Requirements

### BC-1 Color Specification
- [ ] Define new background color palette
- [ ] Ensure accessibility compliance (WCAG AA contrast ratios)
- [ ] Maintain consistency with existing brand colors
- [ ] Test across light/dark mode preferences

### BC-2 Implementation Scope
- [ ] Update all calculator pages in `/public/calculators/`
- [ ] Math category calculators
- [ ] Loans category calculators  
- [ ] Time & Date category calculators
- [ ] Maintain GTEP page exclusions per EXCL-1 rules

### BC-3 CSS Architecture
- [ ] Use CSS custom properties for theme variables
- [ ] Ensure consistent application across all calculator shells
- [ ] Maintain fixed-height shell constraints (UI-3.1)
- [ ] Preserve layout stability during navigation

## React Theme Shell Requirements

### RT-1 Architecture Compliance
- [ ] **MANDATORY:** Resolve MPA vs React architecture conflict
- [ ] Maintain `<a href>` navigation between calculators
- [ ] Preserve full page reload behavior
- [ ] Ensure each calculator remains standalone HTML

### RT-2 Theme System
- [ ] Implement centralized theme management
- [ ] Support dynamic background color changes
- [ ] Maintain CSS custom property integration
- [ ] Enable theme persistence across sessions

### RT-3 Component Structure
- [ ] Create reusable theme shell components
- [ ] Maintain calculator-specific customization capability
- [ ] Preserve existing calculator functionality
- [ ] Ensure SEO-friendly output

## SEO Impact Assessment

### SEO-1 Technical Requirements
- [ ] Maintain server-side rendering or static generation
- [ ] Preserve individual page metadata and structured data
- [ ] Ensure crawlability is not impacted by React implementation
- [ ] Maintain existing URL structure and deep-linking

### SEO-2 Performance Impact
- [ ] Monitor bundle size impact
- [ ] Maintain Core Web Vitals scores
- [ ] Ensure fast initial page loads
- [ ] Test on target devices and network conditions

## Acceptance Criteria

### AC-1 Functional Requirements
- [ ] All calculator pages display new background colors consistently
- [ ] Theme shell provides cohesive visual experience
- [ ] Navigation remains functional with full page reloads
- [ ] Individual calculator functionality is preserved

### AC-2 Technical Requirements
- [ ] Architecture conflict is resolved with documented approach
- [ ] Implementation maintains MPA benefits (SEO, performance, simplicity)
- [ ] Code maintainability is improved
- [ ] No breaking changes to existing calculator APIs

### AC-3 Quality Gates
- [ ] All existing tests pass
- [ ] New theme system has adequate test coverage
- [ ] Performance benchmarks meet or exceed current baselines
- [ ] Accessibility compliance is maintained or improved

## Implementation Notes

1. **Architecture Decision Required:** This requirement cannot proceed until the React vs MPA conflict is resolved.

2. **Incremental Approach:** Consider implementing background color updates first, then evaluating React theme shell separately.

3. **Alternative Solutions:** 
   - CSS-only theme system using custom properties
   - Vanilla JS theme management
   - Build-time React that compiles to static assets

## Related Requirements

- UNIVERSAL_REQUIREMENTS.md: Navigation Architecture (MPA requirement)
- calculator-hierarchy.md: Navigation structure that must be preserved
- Any existing theme or color requirements

## Risk Assessment

**HIGH RISK:** Architectural conflict requires resolution before implementation
**MEDIUM RISK:** Potential SEO impact if not properly implemented
**LOW RISK:** Background color changes (if done with CSS-only approach)

---

**Next Steps:**
1. Resolve MPA vs React architecture conflict
2. Define specific background color specifications  
3. Create detailed technical design document
4. Update requirement with approved architecture approach