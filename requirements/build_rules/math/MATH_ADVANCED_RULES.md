# Math Advanced Calculators — Requirements with Rule IDs

Calculator Category: MATH-ADVANCED  
Purpose: Advanced mathematical and statistical calculation tools including sequences, probability, and statistical analysis.

---

## Requirement ID Mapping

| Requirement ID | Calculator | Associated Rule IDs | Associated Test IDs | Date Created |
|----------------|------------|---------------------|---------------------|---------------|
| REQ-20260119-005 | Basic Calculator | • BASIC-UI-1<br>• BASIC-UI-2<br>• BASIC-UI-3<br>• BASIC-UI-4<br>• BASIC-CALC-1<br>• BASIC-CALC-2<br>• BASIC-CALC-3<br>• BASIC-CALC-4<br>• BASIC-MEM-1<br>• BASIC-MEM-2<br>• BASIC-VAL-1<br>• BASIC-VAL-2<br>• BASIC-OUT-1 | • BASIC-TEST-E2E-LOAD<br>• BASIC-TEST-E2E-NAV<br>• BASIC-TEST-E2E-WORKFLOW<br>• BASIC-TEST-E2E-MOBILE<br>• BASIC-TEST-E2E-A11Y<br>• BASIC-TEST-U-1<br>• BASIC-TEST-U-2 | 2026-01-19 |
| REQ-20260119-006 | Confidence Interval Calculator | • CI-UI-1<br>• CI-UI-2<br>• CI-UI-3<br>• CI-CALC-1<br>• CI-CALC-2<br>• CI-CALC-3<br>• CI-VAL-1<br>• CI-VAL-2<br>• CI-OUT-1<br>• CI-OUT-2 | • CI-TEST-E2E-LOAD<br>• CI-TEST-E2E-NAV<br>• CI-TEST-E2E-WORKFLOW<br>• CI-TEST-E2E-MOBILE<br>• CI-TEST-E2E-A11Y<br>• CI-TEST-U-1<br>• CI-TEST-U-2 | 2026-01-19 |
| REQ-20260119-007 | Mean Median Mode Range Calculator | • MMMR-UI-1<br>• MMMR-UI-2<br>• MMMR-UI-3<br>• MMMR-CALC-1<br>• MMMR-CALC-2<br>• MMMR-CALC-3<br>• MMMR-CALC-4<br>• MMMR-VAL-1<br>• MMMR-VAL-2<br>• MMMR-OUT-1<br>• MMMR-OUT-2 | • MMMR-TEST-E2E-LOAD<br>• MMMR-TEST-E2E-NAV<br>• MMMR-TEST-E2E-WORKFLOW<br>• MMMR-TEST-E2E-MOBILE<br>• MMMR-TEST-E2E-A11Y<br>• MMMR-TEST-U-1<br>• MMMR-TEST-U-2 | 2026-01-19 |
| REQ-20260119-008 | Number Sequence Calculator | • SEQ-UI-1<br>• SEQ-UI-2<br>• SEQ-UI-3<br>• SEQ-CALC-1<br>• SEQ-CALC-2<br>• SEQ-CALC-3<br>• SEQ-CALC-4<br>• SEQ-VAL-1<br>• SEQ-VAL-2<br>• SEQ-OUT-1<br>• SEQ-OUT-2 | • SEQ-TEST-E2E-LOAD<br>• SEQ-TEST-E2E-NAV<br>• SEQ-TEST-E2E-WORKFLOW<br>• SEQ-TEST-E2E-MOBILE<br>• SEQ-TEST-E2E-A11Y<br>• SEQ-TEST-U-1<br>• SEQ-TEST-U-2 | 2026-01-19 |
| REQ-20260119-009 | Permutation Combination Calculator | • PERM-UI-1<br>• PERM-UI-2<br>• PERM-UI-3<br>• PERM-CALC-1<br>• PERM-CALC-2<br>• PERM-CALC-3<br>• PERM-VAL-1<br>• PERM-VAL-2<br>• PERM-OUT-1<br>• PERM-OUT-2 | • PERM-TEST-E2E-LOAD<br>• PERM-TEST-E2E-NAV<br>• PERM-TEST-E2E-WORKFLOW<br>• PERM-TEST-E2E-MOBILE<br>• PERM-TEST-E2E-A11Y<br>• PERM-TEST-U-1<br>• PERM-TEST-U-2 | 2026-01-19 |
| REQ-20260119-010 | Probability Calculator | • PROB-UI-1<br>• PROB-UI-2<br>• PROB-UI-3<br>• PROB-CALC-1<br>• PROB-CALC-2<br>• PROB-CALC-3<br>• PROB-CALC-4<br>• PROB-VAL-1<br>• PROB-VAL-2<br>• PROB-OUT-1<br>• PROB-OUT-2 | • PROB-TEST-E2E-LOAD<br>• PROB-TEST-E2E-NAV<br>• PROB-TEST-E2E-WORKFLOW<br>• PROB-TEST-E2E-MOBILE<br>• PROB-TEST-E2E-A11Y<br>• PROB-TEST-U-1<br>• PROB-TEST-U-2 | 2026-01-19 |
| REQ-20260119-011 | Sample Size Calculator | • SS-UI-1<br>• SS-UI-2<br>• SS-UI-3<br>• SS-CALC-1<br>• SS-CALC-2<br>• SS-VAL-1<br>• SS-VAL-2<br>• SS-OUT-1<br>• SS-OUT-2 | • SS-TEST-E2E-LOAD<br>• SS-TEST-E2E-NAV<br>• SS-TEST-E2E-WORKFLOW<br>• SS-TEST-E2E-MOBILE<br>• SS-TEST-E2E-A11Y<br>• SS-TEST-U-1<br>• SS-TEST-U-2 | 2026-01-19 |
| REQ-20260119-012 | Standard Deviation Calculator | • SD-UI-1<br>• SD-UI-2<br>• SD-UI-3<br>• SD-CALC-1<br>• SD-CALC-2<br>• SD-CALC-3<br>• SD-VAL-1<br>• SD-VAL-2<br>• SD-OUT-1<br>• SD-OUT-2 | • SD-TEST-E2E-LOAD<br>• SD-TEST-E2E-NAV<br>• SD-TEST-E2E-WORKFLOW<br>• SD-TEST-E2E-MOBILE<br>• SD-TEST-E2E-A11Y<br>• SD-TEST-U-1<br>• SD-TEST-U-2 | 2026-01-19 |
| REQ-20260119-013 | Statistics Calculator | • STATS-UI-1<br>• STATS-UI-2<br>• STATS-UI-3<br>• STATS-CALC-1<br>• STATS-CALC-2<br>• STATS-CALC-3<br>• STATS-CALC-4<br>• STATS-VAL-1<br>• STATS-VAL-2<br>• STATS-OUT-1<br>• STATS-OUT-2 | • STATS-TEST-E2E-LOAD<br>• STATS-TEST-E2E-NAV<br>• STATS-TEST-E2E-WORKFLOW<br>• STATS-TEST-E2E-MOBILE<br>• STATS-TEST-E2E-A11Y<br>• STATS-TEST-U-1<br>• STATS-TEST-U-2 | 2026-01-19 |
| REQ-20260119-014 | Z-Score Calculator | • ZSCORE-UI-1<br>• ZSCORE-UI-2<br>• ZSCORE-UI-3<br>• ZSCORE-CALC-1<br>• ZSCORE-CALC-2<br>• ZSCORE-CALC-3<br>• ZSCORE-VAL-1<br>• ZSCORE-VAL-2<br>• ZSCORE-OUT-1<br>• ZSCORE-OUT-2 | • ZSCORE-TEST-E2E-LOAD<br>• ZSCORE-TEST-E2E-NAV<br>• ZSCORE-TEST-E2E-WORKFLOW<br>• ZSCORE-TEST-E2E-MOBILE<br>• ZSCORE-TEST-E2E-A11Y<br>• ZSCORE-TEST-U-1<br>• ZSCORE-TEST-U-2 | 2026-01-19 |

---

## BASIC CALCULATOR RULES (REQ-20260119-005)

### BASIC-UI — User Interface Rules

**BASIC-UI-1**  
Must provide complete calculator button grid layout:
- Numbers: 0-9 buttons in standard calculator layout (3x4 grid)
- Operations: +, -, ×, ÷ buttons
- Equals (=) button prominently placed
- Clear (C) and All Clear (AC) buttons

**BASIC-UI-2**  
Must include memory operation buttons:
- M+ (Memory Add)
- M- (Memory Subtract)
- MR (Memory Recall)
- MC (Memory Clear)
- MS (Memory Store)

**BASIC-UI-3**  
Must provide decimal point (.) button and display screen:
- Large, clear display area showing current input and results
- Support for decimal calculations
- Display formatting with proper decimal placement

**BASIC-UI-4**  
All buttons must be:
- Touch-friendly size (minimum 44px tap target)
- Clearly labeled with high contrast
- Responsive to both click and touch events

### BASIC-CALC — Calculation Logic Rules

**BASIC-CALC-1**  
Must handle all four basic operations accurately:
- Addition: Support positive and negative numbers
- Subtraction: Handle negative results properly
- Multiplication: Support decimal multiplication
- Division: Prevent division by zero, show error message

**BASIC-CALC-2**  
Must support decimal arithmetic:
- Handle decimal point input correctly
- Prevent multiple decimal points in one number
- Maintain precision in calculations (minimum 10 decimal places)
- Round display results appropriately

**BASIC-CALC-3**  
Must support chained operations:
- Allow continuous calculations (5 + 3 = 8, then × 2 = 16)
- Maintain operator precedence where applicable
- Handle equals button for completing operations

**BASIC-CALC-4**  
Must implement proper calculation order:
- Process operations left-to-right for same precedence
- Handle parentheses if implemented (optional advanced feature)
- Complete pending operations when new operator pressed

### BASIC-MEM — Memory Operations Rules

**BASIC-MEM-1**  
Must implement all memory functions:
- MS (Memory Store): Store current display value to memory
- MR (Memory Recall): Display and use stored memory value
- M+ (Memory Add): Add current display to memory
- M- (Memory Subtract): Subtract current display from memory
- MC (Memory Clear): Clear memory to zero

**BASIC-MEM-2**  
Must provide memory indicator:
- Show visual indicator when memory contains non-zero value
- Clear indicator when memory is empty
- Maintain memory across calculations until cleared

### BASIC-VAL — Input Validation Rules

**BASIC-VAL-1**  
Must validate all input operations:
- Prevent division by zero (show "Error" or "Cannot divide by zero")
- Handle overflow situations (very large numbers)
- Prevent invalid decimal point entry (only one per number)
- Limit input length to prevent display overflow

**BASIC-VAL-2**  
Must handle edge cases gracefully:
- Negative number input and calculations
- Very small numbers (near zero)
- Maximum number size limits
- Clear/reset functionality working correctly

### BASIC-OUT — Output Display Rules

**BASIC-OUT-1**  
Must format display output appropriately:
- Show numbers with appropriate decimal places
- Use comma separators for large numbers (optional)
- Handle scientific notation for very large/small numbers
- Display "Error" for invalid operations
- Clear display appropriately with C/AC buttons

---

## CONFIDENCE INTERVAL CALCULATOR RULES (REQ-20260119-006)

### CI-UI — User Interface Rules

**CI-UI-1**  
Must provide statistical input fields:
- Sample Size (n) - integer input with validation
- Sample Mean (x̄) - decimal number input
- Standard Deviation (σ or s) - positive decimal input
- Confidence Level selector (90%, 95%, 99%) as button group

**CI-UI-2**  
Must provide population/sample toggle:
- Population Standard Deviation (σ) mode
- Sample Standard Deviation (s) mode
- Clear labeling of which is selected
- Different calculations based on selection

**CI-UI-3**  
Results display must show:
- Confidence Interval range (Lower bound to Upper bound)
- Margin of Error value
- Critical value used (z-score or t-score)
- Interpretation text explaining the interval

### CI-CALC — Calculation Logic Rules

**CI-CALC-1**  
Must calculate confidence intervals correctly:
- Formula: x̄ ± (critical value × standard error)
- Standard error = σ/√n (population) or s/√n (sample)
- Use appropriate critical values for confidence levels

**CI-CALC-2**  
Must use correct critical values:
- 90% confidence: z = 1.645 or appropriate t-value
- 95% confidence: z = 1.96 or appropriate t-value
- 99% confidence: z = 2.576 or appropriate t-value
- Use t-distribution for sample standard deviation with small samples

**CI-CALC-3**  
Must handle sample size considerations:
- Use z-distribution for large samples (n ≥ 30) with known σ
- Use t-distribution for small samples (n < 30) or unknown σ
- Calculate degrees of freedom (df = n-1) for t-distribution

### CI-VAL — Input Validation Rules

**CI-VAL-1**  
Must validate statistical inputs:
- Sample size must be positive integer ≥ 1
- Standard deviation must be positive (> 0)
- Sample mean can be any real number
- Show appropriate error messages for invalid inputs

**CI-VAL-2**  
Must provide statistical guidance:
- Warn if sample size is very small (n < 5)
- Suggest appropriate confidence level based on context
- Explain difference between population and sample standard deviation

### CI-OUT — Output Display Rules

**CI-OUT-1**  
Must display comprehensive results:
- Confidence interval in format: (lower, upper)
- Margin of error as ± value
- Critical value used with identification (z or t)
- Sample statistics summary (n, x̄, σ/s)

**CI-OUT-2**  
Must provide statistical interpretation:
- Plain English explanation of confidence interval meaning
- Confidence level interpretation
- Assumptions and limitations of the calculation
- Proper statistical notation and terminology

---

## MEAN MEDIAN MODE RANGE CALCULATOR RULES (REQ-20260119-007)

### MMMR-UI — User Interface Rules

**MMMR-UI-1**  
Must provide data input interface:
- Large text area for comma-separated data entry
- Clear placeholder text: "Enter numbers separated by commas (e.g., 1, 2, 3, 4, 5)"
- Input validation for numeric data
- Support for both integer and decimal numbers

**MMMR-UI-2**  
Must display sorted data:
- Show entered data in ascending order
- Clear visual separation between input and sorted display
- Handle duplicate values correctly
- Show count of total data points

**MMMR-UI-3**  
Results display must show all statistics clearly:
- Mean (average) with decimal precision
- Median (middle value)
- Mode (most frequent value) - handle multiple modes
- Range (max - min)
- Visual formatting to distinguish each statistic

### MMMR-CALC — Calculation Logic Rules

**MMMR-CALC-1**  
Must calculate mean accurately:
- Formula: Sum of all values ÷ count of values
- Handle decimal precision appropriately
- Support negative numbers in calculations
- Show result to reasonable decimal places

**MMMR-CALC-2**  
Must calculate median correctly:
- Sort data in ascending order
- For odd count: middle value
- For even count: average of two middle values
- Handle single-value and two-value datasets

**MMMR-CALC-3**  
Must calculate mode properly:
- Find most frequently occurring value(s)
- Handle no mode case (all values appear once)
- Handle multiple modes (multiple values with same highest frequency)
- Display all modes when multiple exist

**MMMR-CALC-4**  
Must calculate range accurately:
- Formula: Maximum value - Minimum value
- Handle single-value dataset (range = 0)
- Support negative numbers correctly
- Show result with appropriate precision

### MMMR-VAL — Input Validation Rules

**MMMR-VAL-1**  
Must validate data input:
- Accept only numeric values (positive, negative, decimal)
- Reject non-numeric entries with clear error message
- Handle empty input fields
- Support minimum 1 data point, maximum reasonable limit (1000)

**MMMR-VAL-2**  
Must handle data formatting:
- Trim whitespace around numbers
- Accept various separator formats (comma, space, semicolon)
- Handle leading/trailing commas gracefully
- Provide clear feedback on data parsing errors

### MMMR-OUT — Output Display Rules

**MMMR-OUT-1**  
Must format statistics display:
- Clear labels for each statistic (Mean:, Median:, Mode:, Range:)
- Appropriate decimal precision (typically 2-4 decimal places)
- Handle special cases (no mode, multiple modes)
- Show data count and sorted values

**MMMR-OUT-2**  
Must provide educational context:
- Brief explanation of each statistic's meaning
- Example interpretation of results
- Note about outliers affecting mean vs median
- Guidance on when each measure is most useful

---

## NUMBER SEQUENCE CALCULATOR RULES (REQ-20260119-008)

### SEQ-UI — User Interface Rules

**SEQ-UI-1**  
Must provide sequence input interface:
- Input field for sequence terms (comma-separated)
- Clear placeholder: "Enter sequence terms (e.g., 2, 4, 6, 8, 10)"
- Support for detecting pattern automatically
- Option to manually specify sequence type

**SEQ-UI-2**  
Must provide sequence type selection:
- Arithmetic sequence radio button/toggle
- Geometric sequence radio button/toggle
- Auto-detect option (default)
- Clear indication of detected or selected type

**SEQ-UI-3**  
Must provide calculation options:
- Find nth term input (enter term number)
- Calculate sum of first n terms
- Display sequence pattern (difference or ratio)
- Show next few terms in sequence

### SEQ-CALC — Calculation Logic Rules

**SEQ-CALC-1**  
Must detect arithmetic sequences:
- Check for constant difference between consecutive terms
- Formula: an = a1 + (n-1)d, where d is common difference
- Calculate common difference accurately
- Handle negative differences

**SEQ-CALC-2**  
Must detect geometric sequences:
- Check for constant ratio between consecutive terms
- Formula: an = a1 × r^(n-1), where r is common ratio
- Calculate common ratio accurately
- Handle fractional and negative ratios

**SEQ-CALC-3**  
Must calculate nth term:
- Use appropriate formula based on sequence type
- Support large term numbers (reasonable limits)
- Handle decimal results appropriately
- Validate term number input (positive integer)

**SEQ-CALC-4**  
Must calculate sum of terms:
- Arithmetic series: Sn = n/2 × (2a1 + (n-1)d) or Sn = n/2 × (a1 + an)
- Geometric series: Sn = a1 × (1 - r^n) / (1 - r) for r ≠ 1
- Handle edge cases (r = 1 for geometric)
- Support partial sums and total sums

### SEQ-VAL — Input Validation Rules

**SEQ-VAL-1**  
Must validate sequence input:
- Minimum 3 terms required for pattern detection
- Accept numeric values only (integer or decimal)
- Handle negative numbers correctly
- Provide clear error messages for invalid sequences

**SEQ-VAL-2**  
Must handle sequence validation:
- Detect when input is neither arithmetic nor geometric
- Show appropriate message for invalid or unclear patterns
- Handle constant sequences (all terms equal)
- Validate reasonable sequence lengths (3-50 terms)

### SEQ-OUT — Output Display Rules

**SEQ-OUT-1**  
Must display sequence analysis:
- Sequence type identified (Arithmetic/Geometric/Neither)
- Common difference or ratio value
- First term value clearly shown
- Formula for nth term displayed

**SEQ-OUT-2**  
Must show calculation results:
- Requested nth term value
- Sum calculation results
- Next 3-5 terms in the sequence
- Clear mathematical notation and explanations

---

## PERMUTATION COMBINATION CALCULATOR RULES (REQ-20260119-009)

### PERM-UI — User Interface Rules

**PERM-UI-1**  
Must provide calculation mode selection:
- Permutation (nPr) radio button or tab
- Combination (nCr) radio button or tab
- Factorial (n!) option
- Clear labels and mathematical notation

**PERM-UI-2**  
Must provide input fields:
- n (total items) - positive integer input
- r (items selected) - positive integer input, where r ≤ n
- Clear labels with mathematical context
- Input validation and error messaging

**PERM-UI-3**  
Must display formulas and explanations:
- Current formula shown based on selected mode
- Mathematical notation: nPr = n!/(n-r)!, nCr = n!/(n-r)!r!
- Plain English explanation of what's being calculated
- Example scenarios for each calculation type

### PERM-CALC — Calculation Logic Rules

**PERM-CALC-1**  
Must calculate permutations correctly:
- Formula: nPr = n! / (n-r)!
- Handle large numbers efficiently (avoid factorial overflow)
- Support reasonable input ranges (n ≤ 100)
- Return integer results for valid inputs

**PERM-CALC-2**  
Must calculate combinations correctly:
- Formula: nCr = n! / (r! × (n-r)!)
- Use efficient calculation method to avoid overflow
- Handle edge cases: nC0 = 1, nCn = 1
- Support reasonable input ranges (n ≤ 100)

**PERM-CALC-3**  
Must calculate factorials correctly:
- Formula: n! = n × (n-1) × (n-2) × ... × 1
- Handle 0! = 1 correctly
- Use efficient algorithm for large numbers
- Support reasonable input range (n ≤ 170 for JavaScript number precision)

### PERM-VAL — Input Validation Rules

**PERM-VAL-1**  
Must validate combinatorial inputs:
- n must be non-negative integer
- r must be non-negative integer
- r must be ≤ n (cannot select more than available)
- Show clear error messages for invalid constraints

**PERM-VAL-2**  
Must handle practical limits:
- Warn for very large calculations (n > 100)
- Prevent calculations that would cause overflow
- Show helpful hints for common mistakes
- Validate integer input (no decimals)

### PERM-OUT — Output Display Rules

**PERM-OUT-1**  
Must display calculation results:
- Large, clear result number
- Formula used with actual values substituted
- Step-by-step calculation (for smaller numbers)
- Scientific notation for very large results

**PERM-OUT-2**  
Must provide contextual information:
- Real-world interpretation of the result
- Example scenarios where this calculation applies
- Relationship between permutations and combinations
- Mathematical significance and applications

---

## PROBABILITY CALCULATOR RULES (REQ-20260119-010)

### PROB-UI — User Interface Rules

**PROB-UI-1**  
Must provide probability calculation modes:
- Single Event Probability
- Multiple Event (AND) Probability
- Multiple Event (OR) Probability
- Conditional Probability
- Clear mode selection with explanations

**PROB-UI-2**  
Must provide appropriate inputs for each mode:
- Single Event: favorable outcomes, total outcomes
- Multiple AND: probability inputs for each event
- Multiple OR: probability inputs for each event
- Conditional: P(A), P(B), P(A|B) or P(B|A)
- Clear labeling with probability notation

**PROB-UI-3**  
Must display probability context:
- Current probability rule/formula
- Input constraints (probabilities between 0 and 1)
- Examples of each probability type
- Visual aids where helpful (tree diagrams, Venn diagrams)

### PROB-CALC — Calculation Logic Rules

**PROB-CALC-1**  
Must calculate basic probability:
- Formula: P(E) = favorable outcomes / total outcomes
- Support fraction and decimal inputs
- Convert between fraction and decimal display
- Handle impossible (0) and certain (1) events

**PROB-CALC-2**  
Must calculate compound probabilities:
- AND (independent): P(A and B) = P(A) × P(B)
- AND (dependent): P(A and B) = P(A) × P(B|A)
- OR (mutually exclusive): P(A or B) = P(A) + P(B)
- OR (not mutually exclusive): P(A or B) = P(A) + P(B) - P(A and B)

**PROB-CALC-3**  
Must calculate conditional probability:
- Formula: P(A|B) = P(A and B) / P(B)
- Bayes' theorem: P(A|B) = P(B|A) × P(A) / P(B)
- Handle dependent events correctly
- Validate conditional probability constraints

**PROB-CALC-4**  
Must support probability distributions:
- Binomial probability (basic cases)
- Normal distribution approximations
- Discrete vs continuous probability concepts
- Expected value calculations

### PROB-VAL — Input Validation Rules

**PROB-VAL-1**  
Must validate probability values:
- All probabilities must be between 0 and 1 inclusive
- Outcomes must be positive integers
- Conditional probability constraints must be logical
- Show clear error messages for invalid ranges

**PROB-VAL-2**  
Must validate probability logic:
- Check for impossible scenarios (P > 1)
- Validate dependent event relationships
- Ensure logical consistency in conditional probabilities
- Warn about common probability misconceptions

### PROB-OUT — Output Display Rules

**PROB-OUT-1**  
Must display probability results:
- Results as both decimal and percentage
- Fraction representation when appropriate
- Clear indication of what probability is being shown
- Interpretation in plain English

**PROB-OUT-2**  
Must provide probability education:
- Explanation of the probability concept calculated
- Real-world interpretation of the result
- Common applications and examples
- Relationship to other probability concepts

---

## SAMPLE SIZE CALCULATOR RULES (REQ-20260119-011)

### SS-UI — User Interface Rules

**SS-UI-1**  
Must provide statistical parameters input:
- Confidence Level selection (90%, 95%, 99%)
- Margin of Error (as percentage or decimal)
- Population Size (optional - for finite populations)
- Expected Response Rate (percentage)

**SS-UI-2**  
Must provide study type selection:
- Proportion/Percentage studies (default p=0.5)
- Mean estimation studies (requires standard deviation estimate)
- Clear explanation of when to use each type
- Custom proportion input for known estimates

**SS-UI-3**  
Must display sample size context:
- Recommended sample size prominently displayed
- Adjusted sample size accounting for response rate
- Finite population correction when applicable
- Cost and feasibility considerations

### SS-CALC — Calculation Logic Rules

**SS-CALC-1**  
Must calculate sample size for proportions:
- Formula: n = (z²×p×(1-p)) / E²
- Where z = critical value, p = expected proportion, E = margin of error
- Use p = 0.5 for maximum sample size (worst case)
- Apply finite population correction when N is provided

**SS-CALC-2**  
Must apply finite population correction:
- Formula: n_adj = n / (1 + (n-1)/N)
- Where n = initial sample size, N = population size
- Only apply when population size is provided and finite
- Show both corrected and uncorrected sample sizes

### SS-VAL — Input Validation Rules

**SS-VAL-1**  
Must validate statistical inputs:
- Confidence level must be between 50% and 99.9%
- Margin of error must be positive and reasonable (0.1% to 50%)
- Population size must be positive integer if provided
- Response rate must be between 1% and 100%

**SS-VAL-2**  
Must provide practical guidance:
- Warn if margin of error is too large (>10% for most studies)
- Suggest minimum confidence levels for different study types
- Alert if calculated sample size exceeds population size
- Provide cost-benefit guidance for large sample sizes

### SS-OUT — Output Display Rules

**SS-OUT-1**  
Must display comprehensive sample size results:
- Required sample size (main result)
- Recommended sample size accounting for non-response
- Key assumptions used in calculation
- Confidence level and margin of error confirmation

**SS-OUT-2**  
Must provide practical implementation guidance:
- Sampling strategy recommendations
- Power analysis implications
- Budget and timeline considerations
- Quality vs. quantity trade-offs in research design

---

## STANDARD DEVIATION CALCULATOR RULES (REQ-20260119-012)

### SD-UI — User Interface Rules

**SD-UI-1**  
Must provide data input interface:
- Large text area for comma-separated data entry
- Support for large datasets (up to 1000 values)
- Clear placeholder text and input instructions
- Option to paste data from spreadsheets

**SD-UI-2**  
Must provide calculation type selection:
- Population Standard Deviation (σ) - divide by N
- Sample Standard Deviation (s) - divide by N-1
- Clear explanation of when to use each
- Default to sample standard deviation

**SD-UI-3**  
Must display comprehensive results:
- Standard deviation (main result)
- Variance (σ² or s²)
- Mean of the dataset
- Count of data points
- Step-by-step calculation breakdown

### SD-CALC — Calculation Logic Rules

**SD-CALC-1**  
Must calculate population standard deviation correctly:
- Formula: σ = √(Σ(xi - μ)² / N)
- Where μ = population mean, N = total count
- Handle negative deviations correctly
- Maintain precision throughout calculation

**SD-CALC-2**  
Must calculate sample standard deviation correctly:
- Formula: s = √(Σ(xi - x̄)² / (N-1))
- Where x̄ = sample mean, (N-1) = degrees of freedom
- Use Bessel's correction (N-1 denominator)
- Handle single data point case (undefined)

**SD-CALC-3**  
Must calculate related statistics:
- Mean (average) of all data points
- Variance (standard deviation squared)
- Sum of squared deviations
- Coefficient of variation (CV = σ/μ × 100%)

### SD-VAL — Input Validation Rules

**SD-VAL-1**  
Must validate dataset input:
- Minimum 2 data points for sample standard deviation
- Accept positive, negative, and decimal numbers
- Handle missing or invalid data points gracefully
- Maximum reasonable dataset size (1000 points)

**SD-VAL-2**  
Must provide data quality feedback:
- Identify potential outliers in the dataset
- Warn about very small datasets (n < 10)
- Handle datasets with zero variance (all values equal)
- Provide guidance on data collection quality

### SD-OUT — Output Display Rules

**SD-OUT-1**  
Must format statistical results:
- Standard deviation with appropriate decimal precision
- Variance displayed with consistent precision
- Mean and other statistics clearly labeled
- Units preserved from original data where applicable

**SD-OUT-2**  
Must provide educational context:
- Interpretation of standard deviation value
- Relationship between standard deviation and data spread
- Comparison with mean (coefficient of variation)
- Practical applications in quality control, research, etc.

---

## STATISTICS CALCULATOR RULES (REQ-20260119-013)

### STATS-UI — User Interface Rules

**STATS-UI-1**  
Must provide comprehensive data input:
- Large text area for dataset entry (comma/space separated)
- Support for large datasets (up to 2000 values)
- Data import options (paste from clipboard)
- Real-time data validation and parsing feedback

**STATS-UI-2**  
Must organize statistical outputs:
- Descriptive statistics section (mean, median, mode, etc.)
- Measures of spread section (range, variance, std dev)
- Distribution properties section (skewness, kurtosis)
- Percentiles and quartiles section

**STATS-UI-3**  
Must provide data visualization options:
- Histogram display toggle
- Box plot display option
- Data distribution summary
- Outlier identification and highlighting

### STATS-CALC — Calculation Logic Rules

**STATS-CALC-1**  
Must calculate all descriptive statistics:
- Mean (arithmetic average)
- Median (middle value when sorted)
- Mode (most frequent value(s))
- Range (max - min)
- Quartiles (Q1, Q2, Q3)
- Percentiles (10th, 25th, 75th, 90th)

**STATS-CALC-2**  
Must calculate measures of spread:
- Standard deviation (sample and population)
- Variance (sample and population)
- Interquartile range (IQR = Q3 - Q1)
- Coefficient of variation (CV)
- Mean absolute deviation (MAD)

**STATS-CALC-3**  
Must calculate distribution properties:
- Skewness (measure of asymmetry)
- Kurtosis (measure of tail heaviness)
- Five-number summary (min, Q1, median, Q3, max)
- Outlier detection using IQR method

**STATS-CALC-4**  
Must provide advanced statistical measures:
- Geometric mean (for positive values)
- Harmonic mean (for positive values)
- Trimmed mean (removing outliers)
- Standard error of the mean

### STATS-VAL — Input Validation Rules

**STATS-VAL-1**  
Must validate comprehensive datasets:
- Minimum 3 data points for meaningful statistics
- Handle mixed positive/negative numbers
- Process decimal numbers with appropriate precision
- Reject non-numeric entries with clear error messages

**STATS-VAL-2**  
Must handle statistical edge cases:
- Single/few data points (limited statistics available)
- All identical values (zero variance scenarios)
- Extreme outliers (impact on statistics)
- Very large datasets (performance considerations)

### STATS-OUT — Output Display Rules

**STATS-OUT-1**  
Must organize statistical display:
- Group related statistics logically
- Use consistent decimal precision across measures
- Highlight key statistics (mean, median, std dev)
- Provide comparison context between measures

**STATS-OUT-2**  
Must provide statistical interpretation:
- Plain English explanation of each statistic
- Guidance on when to use mean vs median
- Interpretation of spread measures
- Practical applications for each statistic type

---

## Z-SCORE CALCULATOR RULES (REQ-20260119-014)

### ZSCORE-UI — User Interface Rules

**ZSCORE-UI-1**  
Must provide calculation mode selection:
- Raw Score to Z-Score conversion
- Z-Score to Probability conversion
- Probability to Z-Score conversion
- Z-Score to Raw Score conversion
- Clear mode descriptions and use cases

**ZSCORE-UI-2**  
Must provide appropriate inputs per mode:
- Raw Score mode: value, mean, standard deviation
- Z-Score mode: z-score value, tail specification
- Probability mode: probability value, tail specification
- Reverse mode: z-score, mean, standard deviation
- Clear labels with statistical notation

**ZSCORE-UI-3**  
Must display normal distribution context:
- Standard normal curve visualization
- Shaded area corresponding to probability
- Z-score position on the curve
- Standard deviation markers (-3σ to +3σ)

### ZSCORE-CALC — Calculation Logic Rules

**ZSCORE-CALC-1**  
Must calculate Z-scores correctly:
- Formula: z = (x - μ) / σ
- Where x = raw score, μ = mean, σ = standard deviation
- Handle negative z-scores appropriately
- Maintain precision in calculations

**ZSCORE-CALC-2**  
Must convert Z-scores to probabilities:
- Use standard normal distribution table/function
- Handle left-tail, right-tail, and two-tail probabilities
- P(Z < z) for left tail, P(Z > z) for right tail
- P(-|z| < Z < |z|) for two-tail

**ZSCORE-CALC-3**  
Must perform inverse calculations:
- Probability to Z-score using inverse normal function
- Z-score to raw score: x = μ + z×σ
- Handle percentile conversions (50th percentile = z = 0)
- Support confidence interval calculations

### ZSCORE-VAL — Input Validation Rules

**ZSCORE-VAL-1**  
Must validate statistical parameters:
- Standard deviation must be positive (σ > 0)
- Probabilities must be between 0 and 1
- Z-scores can be any real number (typically -4 to +4)
- Mean can be any real number

**ZSCORE-VAL-2**  
Must provide practical constraints:
- Warn for extreme z-scores (|z| > 4)
- Alert for very small probabilities (< 0.0001)
- Suggest reasonable parameter ranges
- Validate logical consistency of inputs

### ZSCORE-OUT — Output Display Rules

**ZSCORE-OUT-1**  
Must display comprehensive results:
- Primary calculation result prominently
- Associated probability or percentile
- Standard normal distribution context
- Interpretation in original units when applicable

**ZSCORE-OUT-2**  
Must provide statistical context:
- Percentile rank interpretation
- Distance from mean in standard deviations
- Probability interpretations (1 in X chance)
- Real-world applications and examples

---

## Testing Requirements

### Default E2E Tests (All Calculators)

**[CALC]-TEST-E2E-LOAD**  
Playwright test - Calculator page loads correctly:
- Navigate to calculator URL
- Verify page loads without console errors
- Verify all UI elements render correctly
- Verify no JavaScript exceptions thrown

**[CALC]-TEST-E2E-NAV**  
Playwright test - Navigation and deep-linking:
- Verify Math category navigation works
- Verify direct URL access works
- Verify calculator highlighted in navigation
- Verify browser back/forward works

**[CALC]-TEST-E2E-WORKFLOW**  
Playwright test - Complete user workflow:
- Test primary calculation scenarios
- Enter valid inputs and verify results
- Test all calculation modes/options
- Verify results display correctly formatted

**[CALC]-TEST-E2E-MOBILE**  
Playwright test - Mobile responsiveness:
- Test at mobile viewports (375x667, 768x1024)
- Verify touch-friendly interaction
- Verify no horizontal scroll
- Verify readable text and inputs

**[CALC]-TEST-E2E-A11Y**  
Playwright test - Accessibility compliance:
- Verify all inputs have labels
- Test keyboard navigation
- Verify focus indicators
- Run axe-core accessibility scan

### Calculator-Specific Unit Tests

**BASIC-TEST-U-1 - Basic Calculator Unit Tests**  
Test all arithmetic operations with known values:
- Addition: 15 + 25 = 40
- Subtraction: 100 - 37 = 63
- Multiplication: 12 × 8 = 96
- Division: 84 ÷ 12 = 7
- Decimal operations: 2.5 × 4.2 = 10.5

**BASIC-TEST-U-2 - Basic Calculator Edge Cases**  
Test error handling and edge cases:
- Division by zero (show error)
- Memory operations (store, recall, clear)
- Large number handling
- Decimal precision limits
- Clear/All Clear functionality

**CI-TEST-U-1 - Confidence Interval Unit Tests**  
Test statistical calculations:
- 95% CI with known values: n=25, x̄=50, s=10
- Different confidence levels (90%, 95%, 99%)
- Population vs sample standard deviation
- Small sample t-distribution usage

**CI-TEST-U-2 - Confidence Interval Edge Cases**  
Test validation and edge cases:
- Very small samples (n=2, n=3)
- Zero standard deviation
- Large confidence levels
- Negative sample means

**MMMR-TEST-U-1 - Statistics Unit Tests**  
Test descriptive statistics with known datasets:
- Even count: [1,2,3,4] → Mean=2.5, Median=2.5, Range=3
- Odd count: [1,2,3,4,5] → Mean=3, Median=3, Mode=none
- Multiple modes: [1,2,2,3,3] → Modes=2,3
- Single value: [5] → All statistics = 5

**MMMR-TEST-U-2 - Statistics Edge Cases**  
Test edge cases and validation:
- Single data point
- All identical values (mode handling)
- Large datasets (performance)
- Decimal precision handling

**SEQ-TEST-U-1 - Sequence Unit Tests**  
Test sequence detection and calculations:
- Arithmetic: [2,4,6,8] → d=2, a₅=10
- Geometric: [3,6,12,24] → r=2, a₅=48
- Sum calculations for known sequences
- nth term calculations

**SEQ-TEST-U-2 - Sequence Edge Cases**  
Test validation and edge cases:
- Neither arithmetic nor geometric sequences
- Constant sequences (d=0 or r=1)
- Negative differences/ratios
- Large term number calculations

**PERM-TEST-U-1 - Combinatorics Unit Tests**  
Test permutation/combination calculations:
- 5P3 = 60, 5C3 = 10
- 10P10 = 3,628,800
- Edge cases: nP0 = 1, nCn = 1
- Factorial calculations: 5! = 120

**PERM-TEST-U-2 - Combinatorics Edge Cases**  
Test validation and limits:
- r > n scenarios (should error)
- Large number handling
- 0! = 1 verification
- Integer validation

**PROB-TEST-U-1 - Probability Unit Tests**  
Test probability calculations:
- Basic: 3 favorable, 12 total = 0.25
- AND independent: P(A)=0.6, P(B)=0.4 → P(A and B)=0.24
- OR exclusive: P(A)=0.3, P(B)=0.4 → P(A or B)=0.7
- Conditional probability calculations

**PROB-TEST-U-2 - Probability Edge Cases**  
Test validation and edge cases:
- Probabilities outside [0,1] range
- Impossible conditional scenarios
- Mutually exclusive vs independent events
- Bayes' theorem applications

**SS-TEST-U-1 - Sample Size Unit Tests**  
Test sample size calculations:
- Proportion studies: 95% confidence, 5% margin, p=0.5
- Finite population correction with known N
- Different confidence levels (90%, 95%, 99%)
- Response rate adjustments

**SS-TEST-U-2 - Sample Size Edge Cases**  
Test validation and edge cases:
- Very small margins of error (large sample sizes)
- Very high confidence levels
- Population size smaller than calculated sample
- Extreme response rates (very low/high)

**SD-TEST-U-1 - Standard Deviation Unit Tests**  
Test standard deviation calculations with known datasets:
- Simple dataset: [2,4,6,8,10] → σ=2.83, s=3.16
- Population vs sample calculations
- Zero variance dataset (all values equal)
- Negative number datasets

**SD-TEST-U-2 - Standard Deviation Edge Cases**  
Test validation and edge cases:
- Single data point (undefined sample std dev)
- Very large datasets (performance)
- Extreme outliers impact
- Decimal precision maintenance

**STATS-TEST-U-1 - Comprehensive Statistics Unit Tests**  
Test complete statistical analysis:
- Known dataset: [1,2,3,4,5,6,7,8,9,10]
- All descriptive statistics calculation
- Quartiles and percentiles
- Skewness and kurtosis calculations

**STATS-TEST-U-2 - Statistics Edge Cases**  
Test comprehensive edge cases:
- Multimodal distributions
- Highly skewed data
- Data with extreme outliers
- Mixed positive/negative datasets

**ZSCORE-TEST-U-1 - Z-Score Unit Tests**  
Test Z-score calculations and conversions:
- Standard conversions: μ=100, σ=15, x=115 → z=1.0
- Probability lookups: z=1.96 → p=0.975
- Inverse calculations: p=0.95 → z=1.645
- Percentile conversions

**ZSCORE-TEST-U-2 - Z-Score Edge Cases**  
Test validation and extreme cases:
- Very extreme z-scores (|z| > 4)
- Very small probabilities (< 0.0001)
- Boundary conditions (z=0, p=0.5)
- Inverse calculation accuracy

---

## Integration Testing Requirements

**INT-MATH-1**  
Verify all math calculators load from navigation correctly.

**INT-MATH-2**  
Test calculator switching maintains no cross-calculator state.

**INT-MATH-3**  
Verify deep-linking URLs work for all calculators:
- `/calculators/math/basic/`
- `/calculators/math/confidence-interval/`
- `/calculators/math/mean-median-mode-range/`
- `/calculators/math/number-sequence/`
- `/calculators/math/permutation-combination/`
- `/calculators/math/probability/`

**INT-MATH-4**  
Test universal layout requirements apply to all math calculators.

---

## Completion Criteria

All math calculators must satisfy:

### Universal Requirements
- [ ] Comply with UNIVERSAL_REQUIREMENTS.md (all UI-*, ARCH-*, FS-*, CS-* rules)
- [ ] Navigation integration complete
- [ ] Deep linking functional
- [ ] Mobile responsive design
- [ ] Accessibility compliance (WCAG 2.1 AA)

### Functionality Requirements
- [ ] All calculations mathematically accurate
- [ ] Proper input validation and error handling
- [ ] Results display with appropriate formatting
- [ ] Educational explanations provided
- [ ] Performance acceptable for expected usage

### Testing Requirements
- [ ] All unit tests pass (80%+ coverage)
- [ ] All E2E tests pass (load, navigation, workflow, mobile, a11y)
- [ ] Integration tests pass
- [ ] Cross-browser compatibility verified
- [ ] Performance testing completed

### Quality Requirements
- [ ] Code follows shared patterns and utilities
- [ ] No duplicate logic across calculators
- [ ] Error handling graceful and user-friendly
- [ ] Mathematical notation accurate and consistent
- [ ] Educational value appropriate for target users

Each calculator must pass ALL associated rules and tests before being marked as VERIFIED.